<script>
    var  bibliography_params = {{ bibliographyParams|raw }};
    $('#parse-citations-button').on('click', function(){
        $(this).removeClass('btn-primary').addClass('btn-warning').html('{{ 'loading'|trans }}...').prop('disabled', true);
        var rawCitations = $('#raw-citations').val();
        var subformCount = $('#parse-citations-button').parent().parent().parent().find('.submission-subform').length;
        $('#raw-citations').val('');
        $.ajax({
            url: "{{ path('okulbilisim_advancedcitation_rest_parse') }}",
            method: "POST",
            data: {
                rawCitations: rawCitations,
                itemCount: subformCount
            },
            success: function(result){
                $('#parse-citations-button').removeClass('btn-warning').addClass('btn-primary').html('{{ 'parse.citations'|trans }}').prop('disabled', false);
                $('#citation-forms-container').append(result);
            }});
    });
</script>